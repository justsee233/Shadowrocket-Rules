# ======= æ³¨é‡Š ======= #2024-06-16
# Shadowrocketä½¿ç”¨æ–¹æ³•ï¼š
# 1.ã€é¦–é¡µã€‘-ã€å³ä¸Šè§’+ã€‘-æ·»åŠ èŠ‚ç‚¹æˆ–è®¢é˜…é“¾æ¥ã€‚
# 2.ã€é¦–é¡µã€‘-ã€å…¨å±€è·¯ç”±ã€‘-ã€é…ç½®ã€‘ã€‚
# 3.ã€é¦–é¡µã€‘-ã€è¿é€šæ€§æµ‹è¯•TCPã€‘ï¼Œé€‰æ‹©å¯ç”¨èŠ‚ç‚¹è¿æ¥ã€‚
# Shadowrocketæ·»åŠ é…ç½®æ–‡ä»¶ï¼šã€é…ç½®ã€‘-ã€å³ä¸Šè§’+ã€‘-ç²˜è´´é…ç½®é“¾æ¥-ã€ä¸‹è½½ã€‘-ç‚¹å‡»å¯¹åº”çš„é…ç½®æ–‡ä»¶-ã€ä½¿ç”¨é…ç½®ã€‘
# é…ç½®é“¾æ¥ https://cdn.jsdelivr.net/gh/justsee233/Shadowrocket-Rules/Shadowrocket_direct_ad.conf

[MITM]
# Shadowrocketæ‰“å¼€HTTPSè§£å¯†æ–¹æ³•ï¼š
# 1.ç‚¹å‡»é…ç½®æ–‡ä»¶Shadowrocket_direct_ad.confåé¢â“˜ - HTTPSè§£å¯† - è¯ä¹¦ - ç”Ÿæˆæ–°çš„CAè¯ä¹¦ - å®‰è£…è¯ä¹¦ã€‚
# 2.æ‰‹æœºè®¾ç½® - å·²ä¸‹è½½æè¿°æ–‡ä»¶ - å®‰è£…ã€‚
# 3.æ‰‹æœºè®¾ç½® - é€šç”¨ - å…³äºæœ¬æœº - è¯ä¹¦ä¿¡ä»»è®¾ç½® - å¼€å¯å¯¹åº”Shadowrocketè¯ä¹¦ä¿¡ä»»ã€‚
# Shadowrocketä»…ä¼šè§£å¯†hostnameæŒ‡å®šçš„åŸŸåçš„è¯·æ±‚ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å‰ç¼€ - æ’é™¤ç‰¹å®šä¸»æœºåï¼Œå¦‚ -*.example.comã€‚iOSç³»ç»Ÿå’ŒæŸäº›åº”ç”¨æœ‰ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥ï¼Œä»…ä¿¡ä»»æŸäº›ç‰¹å®šçš„è¯ä¹¦ï¼Œå¯¹è¿™äº›åŸŸåå¯åŠ¨è§£å¯†å¯èƒ½å¯¼è‡´é—®é¢˜ï¼Œå¦‚ *.apple.comï¼Œ*.icloud.comã€‚

# ======= æ·»åŠ æ¨¡å— ====== #
# ã€é…ç½®ã€‘-ã€æ¨¡å—ã€‘-ã€å³ä¸Šè§’+ã€‘ ç²˜è´´æ¨¡å—é“¾æ¥æ·»åŠ 
# APPå¯åŠ¨é¡µå»å¹¿å‘Šèåˆultra+ https://whatshub.top/module/adultraplus.module

[General]
# æ—è·¯ç³»ç»Ÿã€‚å¦‚æœç¦ç”¨æ­¤é€‰é¡¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ç³»ç»Ÿé—®é¢˜ï¼Œå¦‚æ¨é€é€šçŸ¥å»¶è¿Ÿã€‚
bypass-system = true
# å¯ç”¨IPv6æ”¯æŒã€‚falseè¡¨ç¤ºä¸å¯ç”¨ï¼Œtrueè¡¨ç¤ºå¯ç”¨ã€‚
ipv6 = true
# é¦–é€‰IPv6ã€‚ä¼˜å…ˆå‘IPv6çš„DNSæœåŠ¡å™¨æŸ¥è¯¢AAAAè®°å½•ï¼Œä¼˜å…ˆä½¿ç”¨AAAAè®°å½•ã€‚falseè¡¨ç¤ºä¸å¯ç”¨ã€‚
prefer-ipv6 = false
# ç§æœ‰IPåº”ç­”ã€‚å¦‚æœå…³é—­è¯¥é€‰é¡¹ï¼ŒåŸŸåè§£æè¿”å›ç§æœ‰IPï¼ŒShadowrocketä¼šè®¤ä¸ºè¯¥åŸŸåè¢«åŠ«æŒè€Œå¼ºåˆ¶ä½¿ç”¨ä»£ç†ã€‚
private-ip-answer = true
# DNSè¦†å†™ã€‚ä½¿ç”¨æ™®é€šDNSæˆ–åŠ å¯†DNSï¼ˆå¦‚dohã€doqã€dotç­‰ï¼‰è¦†ç›–é»˜è®¤çš„ç³»ç»ŸDNSã€‚æœ‰äº›dns over httpsæ”¯æŒhttp3ï¼Œæ‰€ä»¥å°è¯•æŸ¥è¯¢ï¼Œå¦‚æœæ”¯æŒå°±åˆ‡æ¢åˆ°http3ã€‚å¯åœ¨dohé“¾æ¥åé¢åŠ ä¸Š#no-h3å…³é—­ã€‚
dns-server = https://dns.alidns.com/dns-query, https://doh.pub/dns-query
# å¤‡ç”¨DNSã€‚å½“è¦†å†™çš„DNSè§£æå¤±è´¥åå›é€€å¤‡ç”¨DNSï¼Œå¦‚éœ€æŒ‡å®šå¤šä¸ªDNSï¼Œå¯ç”¨é€—å·åˆ†éš”ã€‚systemè¡¨ç¤ºå›é€€åˆ°ç³»ç»ŸDNSã€‚
fallback-dns-server = system
# è·³è¿‡ä»£ç†ã€‚æ­¤é€‰é¡¹å¼ºåˆ¶è¿™äº›åŸŸåæˆ–IPçš„è¿æ¥èŒƒå›´ç”±Shadowrocket TUNæ¥å£æ¥å¤„ç†ï¼Œè€Œä¸æ˜¯Shadowrocketä»£ç†æœåŠ¡å™¨ã€‚æ­¤é€‰é¡¹ç”¨äºè§£å†³ä¸€äº›åº”ç”¨ç¨‹åºçš„ä¸€äº›å…¼å®¹æ€§é—®é¢˜ã€‚
skip-proxy = 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com
# TUNæ—è·¯è·¯ç”±ã€‚Shadowrocket TUNæ¥å£åªèƒ½å¤„ç†TCPåè®®ã€‚ä½¿ç”¨æ­¤é€‰é¡¹å¯ä»¥ç»•è¿‡æŒ‡å®šçš„IPèŒƒå›´ï¼Œè®©å…¶ä»–åè®®é€šè¿‡ã€‚
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32

[Proxy Group]
ğŸš€ç­–ç•¥é€‰æ‹© = select,ğŸŒå…¨çƒç›´è¿,â™»ï¸è‡ªåŠ¨é€‰æ‹©,PROXY,âœ¨å…æµèŠ‚ç‚¹,ğŸ å®¶åº­å†…ç½‘,interval=3600,tolerance=100,timeout=5,url=http://www.gstatic.com/generate_204,select=0
ğŸŒå…¨çƒç›´è¿ = select,DIRECT,âœ¨å…æµèŠ‚ç‚¹,ğŸ å®¶åº­å†…ç½‘,select=0
â™»ï¸è‡ªåŠ¨é€‰æ‹© = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=.*
âœ¨å…æµèŠ‚ç‚¹ = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=-ml|iqiyi|youku|douyin|bilibili|qq|baidu|taobao
ğŸ å®¶åº­å†…ç½‘ = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=-home

[Rule]
# ======= åˆ†æµ ======= #
# å¹¿å‘ŠåŸŸååˆ—è¡¨
DOMAIN-SET,https://anti-ad.net/surge2.txt, REJECT
# å±€åŸŸç½‘æ®µ
IP-CIDR,192.168.68.0/24,DIRECT
# å®¶åº­å†…ç½‘
IP-CIDR,192.168.0.0/16,ğŸ å®¶åº­å†…ç½‘
# è¡¨ç¤ºå½“å…¶ä»–æ‰€æœ‰è§„åˆ™éƒ½åŒ¹é…ä¸åˆ°æ—¶æ‰ä½¿ç”¨FINALè§„åˆ™çš„ç­–ç•¥ã€‚
FINAL,ğŸš€ç­–ç•¥é€‰æ‹©

[Host]
localhost = 127.0.0.1

[URL Rewrite]
# ======= Googleæœç´¢é‡å†™  ======= #
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302
